import{o as _,c as I,a as h,m as k,r as y,n as pe,v as me,p as te,b as T,u as P,t as E,q as ne,s as he,x as $,y as ge,z as H,A as M,e as A,B as re,C as be,D as ye,F as oe,E as le,G as we,w as D,T as xe,H as _e,I as Ie,J as Se}from"./DKIkDECq.js";function $e(e,t){return _(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function Ee(e,t){return _(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})])}const Te={class:"w-full max-w-2xl mx-auto"},ke={class:"flex flex-col space-y-4"},Me={class:"relative rounded-md shadow-sm"},Pe={class:"absolute inset-y-0 right-0 flex items-center pr-3"},De={key:0,class:"text-sm text-red-600"},Fe=["disabled"],Ae={key:0},Oe={key:1},Ne=k({__name:"UrlInput",emits:["submit"],setup(e,{emit:t}){const n=y(""),l=y(!1),a=y(""),o=t,r=i=>/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+$/.test(i),s=()=>{if(a.value="",!n.value){a.value="Veuillez entrer une URL YouTube";return}if(!r(n.value)){a.value="URL YouTube invalide";return}l.value=!0,o("submit",n.value)};return(i,c)=>(_(),I("div",Te,[h("form",{onSubmit:he(s,["prevent"]),class:"mt-4"},[h("div",ke,[c[1]||(c[1]=h("label",{for:"youtube-url",class:"block text-sm font-medium text-gray-700"}," URL de la vidéo YouTube ",-1)),h("div",Me,[pe(h("input",{id:"youtube-url","onUpdate:modelValue":c[0]||(c[0]=v=>n.value=v),type:"text",placeholder:"https://www.youtube.com/watch?v=...",class:te(["block w-full rounded-md border-gray-300 pr-10 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":a.value}])},null,2),[[me,n.value]]),h("div",Pe,[T(P(Ee),{class:"h-5 w-5 text-gray-400"})])]),a.value?(_(),I("div",De,E(a.value),1)):ne("",!0),h("button",{type:"submit",disabled:l.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[l.value?(_(),I("span",Ae,"Chargement...")):(_(),I("span",Oe,"Charger la vidéo"))],8,Fe)])],32)]))}}),Re={class:"bg-white rounded-lg shadow-lg overflow-hidden"},Le={class:"relative w-full",style:{"padding-top":"56.25%"}},Ce=["src"],je={class:"p-4"},Ue={class:"text-xl font-semibold text-gray-900 mb-2"},Be={class:"flex items-center justify-between text-sm text-gray-600"},Ve=k({__name:"VideoPlayer",props:{videoId:{},thumbnail:{},title:{},author:{},duration:{}},setup(e){const t=e,n=a=>{const o=parseInt(a),r=Math.floor(o/60),s=o%60;return`${r}:${s.toString().padStart(2,"0")}`},l=$(()=>t.videoId?`https://www.youtube.com/embed/${t.videoId}`:"");return(a,o)=>(_(),I("div",Re,[h("div",Le,[h("iframe",{src:l.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",class:"absolute top-0 left-0 w-full h-full"},null,8,Ce)]),h("div",je,[h("h2",Ue,E(a.title),1),h("div",Be,[h("span",null,E(a.author),1),h("span",null,E(n(a.duration)),1)])])]))}});var G;let He=Symbol("headlessui.useid"),qe=0;const q=(G=ge)!=null?G:function(){return H(He,()=>`${++qe}`)()};function b(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function R(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,R),l}var Ke=Object.defineProperty,We=(e,t,n)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z=(e,t,n)=>(We(e,typeof t!="symbol"?t+"":t,n),n);let Ye=class{constructor(){Z(this,"current",this.detect()),Z(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},K=new Ye;function W(e){if(K.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=b(e);if(t)return t.ownerDocument}return document}let U=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var B=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(B||{}),ze=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ze||{}),Ge=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Ge||{});function ae(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(U)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Y=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Y||{});function z(e,t=0){var n;return e===((n=W(e))==null?void 0:n.body)?!1:R(t,{0(){return e.matches(U)},1(){let l=e;for(;l!==null;){if(l.matches(U))return!0;l=l.parentElement}return!1}})}function ue(e){let t=W(e);M(()=>{t&&!z(t.activeElement,0)&&Xe(e)})}var Ze=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ze||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Xe(e){e==null||e.focus({preventScroll:!0})}let Je=["textarea","input"].join(",");function Qe(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Je))!=null?n:!1}function se(e,t=n=>n){return e.slice().sort((n,l)=>{let a=t(n),o=t(l);if(a===null||o===null)return 0;let r=a.compareDocumentPosition(o);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function et(e,t){return tt(ae(),t,{relativeTo:e})}function tt(e,t,{sorted:n=!0,relativeTo:l=null,skipElements:a=[]}={}){var o;let r=(o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?o:document,s=Array.isArray(e)?n?se(e):e:ae(e);a.length>0&&s.length>1&&(s=s.filter(d=>!a.includes(d))),l=l??r.activeElement;let i=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(l))-1;if(t&4)return Math.max(0,s.indexOf(l))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),v=t&32?{preventScroll:!0}:{},p=0,u=s.length,f;do{if(p>=u||p+u<=0)return 0;let d=c+p;if(t&16)d=(d+u)%u;else{if(d<0)return 3;if(d>=u)return 1}f=s[d],f==null||f.focus(v),p+=i}while(f!==r.activeElement);return t&6&&Qe(f)&&f.select(),2}function nt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rt(){return/Android/gi.test(window.navigator.userAgent)}function ot(){return nt()||rt()}function N(e,t,n){K.isServer||A(l=>{document.addEventListener(e,t,n),l(()=>document.removeEventListener(e,t,n))})}function lt(e,t,n){K.isServer||A(l=>{window.addEventListener(e,t,n),l(()=>window.removeEventListener(e,t,n))})}function at(e,t,n=$(()=>!0)){function l(o,r){if(!n.value||o.defaultPrevented)return;let s=r(o);if(s===null||!s.getRootNode().contains(s))return;let i=function c(v){return typeof v=="function"?c(v()):Array.isArray(v)||v instanceof Set?v:[v]}(e);for(let c of i){if(c===null)continue;let v=c instanceof HTMLElement?c:b(c);if(v!=null&&v.contains(s)||o.composed&&o.composedPath().includes(v))return}return!z(s,Y.Loose)&&s.tabIndex!==-1&&o.preventDefault(),t(o,s)}let a=y(null);N("pointerdown",o=>{var r,s;n.value&&(a.value=((s=(r=o.composedPath)==null?void 0:r.call(o))==null?void 0:s[0])||o.target)},!0),N("mousedown",o=>{var r,s;n.value&&(a.value=((s=(r=o.composedPath)==null?void 0:r.call(o))==null?void 0:s[0])||o.target)},!0),N("click",o=>{ot()||a.value&&(l(o,()=>a.value),a.value=null)},!0),N("touchend",o=>l(o,()=>o.target instanceof HTMLElement?o.target:null),!0),lt("blur",o=>l(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function X(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function ut(e,t){let n=y(X(e.value.type,e.value.as));return re(()=>{n.value=X(e.value.type,e.value.as)}),A(()=>{var l;n.value||b(t)&&b(t)instanceof HTMLButtonElement&&!((l=b(t))!=null&&l.hasAttribute("type"))&&(n.value="button")}),n}function J(e){return[e.screenX,e.screenY]}function st(){let e=y([-1,-1]);return{wasMoved(t){let n=J(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=J(t)}}}function it({container:e,accept:t,walk:n,enabled:l}){A(()=>{let a=e.value;if(!a||l!==void 0&&!l.value)return;let o=W(e);if(!o)return;let r=Object.assign(i=>t(i),{acceptNode:t}),s=o.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,r,!1);for(;s.nextNode();)n(s.currentNode)})}var V=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(V||{}),ct=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ct||{});function L({visible:e=!0,features:t=0,ourProps:n,theirProps:l,...a}){var o;let r=ce(l,n),s=Object.assign(a,{props:r});if(e||t&2&&r.static)return j(s);if(t&1){let i=(o=r.unmount)==null||o?0:1;return R(i,{0(){return null},1(){return j({...a,props:{...r,hidden:!0,style:{display:"none"}}})}})}return j(s)}function j({props:e,attrs:t,slots:n,slot:l,name:a}){var o,r;let{as:s,...i}=dt(e,["unmount","static"]),c=(o=n.default)==null?void 0:o.call(n,l),v={};if(l){let p=!1,u=[];for(let[f,d]of Object.entries(l))typeof d=="boolean"&&(p=!0),d===!0&&u.push(f);p&&(v["data-headlessui-state"]=u.join(" "))}if(s==="template"){if(c=ie(c??[]),Object.keys(i).length>0||Object.keys(t).length>0){let[p,...u]=c??[];if(!ft(p)||u.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(i).concat(Object.keys(t)).map(m=>m.trim()).filter((m,w,g)=>g.indexOf(m)===w).sort((m,w)=>m.localeCompare(w)).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let f=ce((r=p.props)!=null?r:{},i,v),d=be(p,f,!0);for(let m in f)m.startsWith("on")&&(d.props||(d.props={}),d.props[m]=f[m]);return d}return Array.isArray(c)&&c.length===1?c[0]:c}return ye(s,Object.assign({},i,v),{default:()=>c})}function ie(e){return e.flatMap(t=>t.type===oe?ie(t.children):[t])}function ce(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let l of e)for(let a in l)a.startsWith("on")&&typeof l[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(l[a])):t[a]=l[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(l=>[l,void 0])));for(let l in n)Object.assign(t,{[l](a,...o){let r=n[l];for(let s of r){if(a instanceof Event&&a.defaultPrevented)return;s(a,...o)}}});return t}function dt(e,t=[]){let n=Object.assign({},e);for(let l of t)l in n&&delete n[l];return n}function ft(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let de=Symbol("Context");var F=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(F||{});function vt(){return H(de,null)}function pt(e){le(de,e)}var x=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(x||{});function mt(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function ht(e,t){let n=t.resolveItems();if(n.length<=0)return null;let l=t.resolveActiveIndex(),a=l??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return l}case 1:{a===-1&&(a=n.length);for(let o=a-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return l}case 2:{for(let o=a+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return l}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return l}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return l}case 5:return null;default:mt(e)}}let Q=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ee(e){var t,n;let l=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return l;let o=!1;for(let s of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),o=!0;let r=o?(n=a.innerText)!=null?n:"":l;return Q.test(r)&&(r=r.replace(Q,"")),r}function gt(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let l=n.split(" ").map(a=>{let o=document.getElementById(a);if(o){let r=o.getAttribute("aria-label");return typeof r=="string"?r.trim():ee(o).trim()}return null}).filter(Boolean);if(l.length>0)return l.join(", ")}return ee(e).trim()}function bt(e){let t=y(""),n=y("");return()=>{let l=b(e);if(!l)return"";let a=l.innerText;if(t.value===a)return n.value;let o=gt(l).trim().toLowerCase();return t.value=a,n.value=o,o}}var yt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(yt||{}),wt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(wt||{});function xt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let fe=Symbol("MenuContext");function C(e){let t=H(fe,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,C),n}return t}let _t=k({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let l=y(1),a=y(null),o=y(null),r=y([]),s=y(""),i=y(null),c=y(1);function v(u=f=>f){let f=i.value!==null?r.value[i.value]:null,d=se(u(r.value.slice()),w=>b(w.dataRef.domRef)),m=f?d.indexOf(f):null;return m===-1&&(m=null),{items:d,activeItemIndex:m}}let p={menuState:l,buttonRef:a,itemsRef:o,items:r,searchQuery:s,activeItemIndex:i,activationTrigger:c,closeMenu:()=>{l.value=1,i.value=null},openMenu:()=>l.value=0,goToItem(u,f,d){let m=v(),w=ht(u===S.Specific?{focus:S.Specific,id:f}:{focus:u},{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:g=>g.id,resolveDisabled:g=>g.dataRef.disabled});s.value="",i.value=w,c.value=d??1,r.value=m.items},search(u){let f=s.value!==""?0:1;s.value+=u.toLowerCase();let d=(i.value!==null?r.value.slice(i.value+f).concat(r.value.slice(0,i.value+f)):r.value).find(w=>w.dataRef.textValue.startsWith(s.value)&&!w.dataRef.disabled),m=d?r.value.indexOf(d):-1;m===-1||m===i.value||(i.value=m,c.value=1)},clearSearch(){s.value=""},registerItem(u,f){let d=v(m=>[...m,{id:u,dataRef:f}]);r.value=d.items,i.value=d.activeItemIndex,c.value=1},unregisterItem(u){let f=v(d=>{let m=d.findIndex(w=>w.id===u);return m!==-1&&d.splice(m,1),d});r.value=f.items,i.value=f.activeItemIndex,c.value=1}};return at([a,o],(u,f)=>{var d;p.closeMenu(),z(f,Y.Loose)||(u.preventDefault(),(d=b(a))==null||d.focus())},$(()=>l.value===0)),le(fe,p),pt($(()=>R(l.value,{0:F.Open,1:F.Closed}))),()=>{let u={open:l.value===0,close:p.closeMenu};return L({ourProps:{},theirProps:e,slot:u,slots:t,attrs:n,name:"Menu"})}}}),It=k({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:l}){var a;let o=(a=e.id)!=null?a:`headlessui-menu-button-${q()}`,r=C("MenuButton");l({el:r.buttonRef,$el:r.buttonRef});function s(p){switch(p.key){case x.Space:case x.Enter:case x.ArrowDown:p.preventDefault(),p.stopPropagation(),r.openMenu(),M(()=>{var u;(u=b(r.itemsRef))==null||u.focus({preventScroll:!0}),r.goToItem(S.First)});break;case x.ArrowUp:p.preventDefault(),p.stopPropagation(),r.openMenu(),M(()=>{var u;(u=b(r.itemsRef))==null||u.focus({preventScroll:!0}),r.goToItem(S.Last)});break}}function i(p){switch(p.key){case x.Space:p.preventDefault();break}}function c(p){e.disabled||(r.menuState.value===0?(r.closeMenu(),M(()=>{var u;return(u=b(r.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(p.preventDefault(),r.openMenu(),xt(()=>{var u;return(u=b(r.itemsRef))==null?void 0:u.focus({preventScroll:!0})})))}let v=ut($(()=>({as:e.as,type:t.type})),r.buttonRef);return()=>{var p;let u={open:r.menuState.value===0},{...f}=e,d={ref:r.buttonRef,id:o,type:v.value,"aria-haspopup":"menu","aria-controls":(p=b(r.itemsRef))==null?void 0:p.id,"aria-expanded":r.menuState.value===0,onKeydown:s,onKeyup:i,onClick:c};return L({ourProps:d,theirProps:f,slot:u,attrs:t,slots:n,name:"MenuButton"})}}}),St=k({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:l}){var a;let o=(a=e.id)!=null?a:`headlessui-menu-items-${q()}`,r=C("MenuItems"),s=y(null);l({el:r.itemsRef,$el:r.itemsRef}),it({container:$(()=>b(r.itemsRef)),enabled:$(()=>r.menuState.value===0),accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function i(u){var f;switch(s.value&&clearTimeout(s.value),u.key){case x.Space:if(r.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),r.search(u.key);case x.Enter:if(u.preventDefault(),u.stopPropagation(),r.activeItemIndex.value!==null){let d=r.items.value[r.activeItemIndex.value];(f=b(d.dataRef.domRef))==null||f.click()}r.closeMenu(),ue(b(r.buttonRef));break;case x.ArrowDown:return u.preventDefault(),u.stopPropagation(),r.goToItem(S.Next);case x.ArrowUp:return u.preventDefault(),u.stopPropagation(),r.goToItem(S.Previous);case x.Home:case x.PageUp:return u.preventDefault(),u.stopPropagation(),r.goToItem(S.First);case x.End:case x.PageDown:return u.preventDefault(),u.stopPropagation(),r.goToItem(S.Last);case x.Escape:u.preventDefault(),u.stopPropagation(),r.closeMenu(),M(()=>{var d;return(d=b(r.buttonRef))==null?void 0:d.focus({preventScroll:!0})});break;case x.Tab:u.preventDefault(),u.stopPropagation(),r.closeMenu(),M(()=>et(b(r.buttonRef),u.shiftKey?B.Previous:B.Next));break;default:u.key.length===1&&(r.search(u.key),s.value=setTimeout(()=>r.clearSearch(),350));break}}function c(u){switch(u.key){case x.Space:u.preventDefault();break}}let v=vt(),p=$(()=>v!==null?(v.value&F.Open)===F.Open:r.menuState.value===0);return()=>{var u,f;let d={open:r.menuState.value===0},{...m}=e,w={"aria-activedescendant":r.activeItemIndex.value===null||(u=r.items.value[r.activeItemIndex.value])==null?void 0:u.id,"aria-labelledby":(f=b(r.buttonRef))==null?void 0:f.id,id:o,onKeydown:i,onKeyup:c,role:"menu",tabIndex:0,ref:r.itemsRef};return L({ourProps:w,theirProps:m,slot:d,attrs:t,slots:n,features:V.RenderStrategy|V.Static,visible:p.value,name:"MenuItems"})}}}),$t=k({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n,expose:l}){var a;let o=(a=e.id)!=null?a:`headlessui-menu-item-${q()}`,r=C("MenuItem"),s=y(null);l({el:s,$el:s});let i=$(()=>r.activeItemIndex.value!==null?r.items.value[r.activeItemIndex.value].id===o:!1),c=bt(s),v=$(()=>({disabled:e.disabled,get textValue(){return c()},domRef:s}));re(()=>r.registerItem(o,v)),we(()=>r.unregisterItem(o)),A(()=>{r.menuState.value===0&&i.value&&r.activationTrigger.value!==0&&M(()=>{var g,O;return(O=(g=b(s))==null?void 0:g.scrollIntoView)==null?void 0:O.call(g,{block:"nearest"})})});function p(g){if(e.disabled)return g.preventDefault();r.closeMenu(),ue(b(r.buttonRef))}function u(){if(e.disabled)return r.goToItem(S.Nothing);r.goToItem(S.Specific,o)}let f=st();function d(g){f.update(g)}function m(g){f.wasMoved(g)&&(e.disabled||i.value||r.goToItem(S.Specific,o,0))}function w(g){f.wasMoved(g)&&(e.disabled||i.value&&r.goToItem(S.Nothing))}return()=>{let{disabled:g,...O}=e,ve={active:i.value,disabled:g,close:r.closeMenu};return L({ourProps:{id:o,ref:s,role:"menuitem",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,onClick:p,onFocus:u,onPointerenter:d,onMouseenter:d,onPointermove:m,onMousemove:m,onPointerleave:w,onMouseleave:w},theirProps:{...n,...O},slot:ve,attrs:n,slots:t,name:"MenuItem"})}}});const Et={class:"mt-4"},Tt={class:"flex space-x-2"},kt={key:0},Mt={key:1},Pt=["disabled"],Dt={key:0},Ft={key:1},At={class:"py-1"},Ot=["onClick"],Nt={class:"flex justify-between items-center"},Rt={class:"text-gray-500"},Lt=k({__name:"DownloadButton",props:{video:{},isLoading:{type:Boolean}},emits:["download"],setup(e,{emit:t}){const n=e,l=y(null),a=i=>{if(!i)return"Taille inconnue";const c=parseInt(i);return c<1024*1024?`${(c/1024).toFixed(1)} KB`:`${(c/(1024*1024)).toFixed(1)} MB`},o=i=>{const c=i.match(/video\/([^;]+)/);return c?c[1].toUpperCase():"Unknown"},r=$(()=>n.video.formats.filter(i=>i.hasVideo&&i.hasAudio).sort((i,c)=>{var u,f,d,m;const v=parseInt(((f=(u=i.quality)==null?void 0:u.match(/\d+/))==null?void 0:f[0])||"0");return parseInt(((m=(d=c.quality)==null?void 0:d.match(/\d+/))==null?void 0:m[0])||"0")-v})),s=async i=>{try{const v=`/api/youtube/download?${new URLSearchParams({url:n.video.url,itag:i.itag.toString()}).toString()}`,p=document.createElement("a");p.href=v,document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(c){console.error("Download error:",c)}};return(i,c)=>(_(),I("div",Et,[T(P(_t),{as:"div",class:"relative inline-block text-left w-full"},{default:D(()=>[h("div",Tt,[T(P(It),{class:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:i.isLoading},{default:D(()=>[l.value?(_(),I("span",kt,E(l.value.quality)+" - "+E(o(l.value.mimeType)),1)):(_(),I("span",Mt,"Sélectionner la qualité")),T(P($e),{class:"ml-2 -mr-1 h-5 w-5","aria-hidden":"true"})]),_:1},8,["disabled"]),h("button",{onClick:c[0]||(c[0]=v=>l.value&&s(l.value)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:!l.value||i.isLoading},[i.isLoading?(_(),I("span",Dt,"Chargement...")):(_(),I("span",Ft,"Télécharger"))],8,Pt)]),T(xe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:D(()=>[T(P(St),{class:"origin-top-right absolute right-0 mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none max-h-60 overflow-y-auto"},{default:D(()=>[h("div",At,[(_(!0),I(oe,null,_e(r.value,v=>(_(),Ie(P($t),{key:v.itag},{default:D(({active:p})=>[h("button",{onClick:u=>l.value=v,class:te([p?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},[h("div",Nt,[h("span",null,E(v.quality)+E(v.fps?` ${v.fps}fps`:""),1),h("span",Rt,E(o(v.mimeType))+" - "+E(a(v.contentLength)),1)])],10,Ot)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:1})]))}}),Ct={class:"max-w-4xl mx-auto px-4 py-8"},jt={class:"max-w-2xl mx-auto"},Ut={key:0,class:"mt-8 max-w-2xl mx-auto"},Ht=k({__name:"index",setup(e){const t=y(null),n=y(!1),{showSuccess:l,showError:a}=Se(),o=async s=>{try{n.value=!0;const i=await $fetch("/api/youtube/validate",{method:"POST",body:{url:s}});t.value=i,l("Vidéo chargée avec succès")}catch(i){a(i.message||"Erreur lors du chargement de la vidéo"),console.error(i)}finally{n.value=!1}},r=async s=>{if(t.value)try{n.value=!0;const i=await $fetch("/api/youtube/download",{method:"GET",params:{url:t.value.url,itag:s.itag}}),c=document.createElement("a");c.href=s.url,c.download=`${t.value.title||"video"}.${s.format}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),l("Téléchargement démarré")}catch(i){a(i.message||"Erreur lors du téléchargement de la vidéo"),console.error(i)}finally{n.value=!1}};return(s,i)=>(_(),I("div",Ct,[i[0]||(i[0]=h("div",{class:"text-center mb-12"},[h("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," YouTube Downloader "),h("p",{class:"text-lg text-gray-600"}," Téléchargez vos vidéos YouTube préférées facilement ")],-1)),h("div",jt,[T(Ne,{onSubmit:o,disabled:n.value},null,8,["disabled"])]),t.value?(_(),I("div",Ut,[T(Ve,{"video-id":t.value.videoId,thumbnail:t.value.thumbnail,title:t.value.title,author:t.value.author,duration:t.value.duration},null,8,["video-id","thumbnail","title","author","duration"]),T(Lt,{video:t.value,"is-loading":n.value,onDownload:r},null,8,["video","is-loading"])])):ne("",!0)]))}});export{Ht as default};
